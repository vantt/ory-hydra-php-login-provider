# docker network create --driver=bridge --subnet=172.21.0.0/16 --gateway=172.21.0.1 https-proxy
version: "3.5"

networks:
    default:
        driver: bridge
    proxy:
        external: true
        name: https-proxy

services:
    php:
        #build: http://git.c
        image: devops/phpfpm:7.4.4
        volumes:
            - ${PROJECT_FOLDER}:/app
    nginx:
        #build: http://git.c
        image: devops/nginx:1.17.9
        ports:
            - 8080:8080
        depends_on:
            - php
        volumes:
            - ./nginx-vhost.conf:/etc/nginx/conf.d/localhost.conf
            - ${PROJECT_FOLDER}:/app
        networks:
            proxy: {}
            default: {}
    dumpserver:
        image: devops/phpcli:7.4.4
        ports:
            - 9912:9912
        volumes:
            - ${PROJECT_FOLDER}:/app
        command: "php bin/console server:dump"
        networks:
            proxy: {}
            default: {}